
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tug&#8217;s Blog</title>
  <meta name="author" content="Tug Grall">

  
  <meta name="description" content="OracleAS 10gR3, so OC4J standalone, is using the standard Java logging framework. Some of the
benefits are easy configuration, and extensibility. The &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tgrall.github.io/posts/15/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Tug's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1520374-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Tug&#8217;s Blog</a></h1>
  
    <h2>Redis, NoSQL and more&#8230;</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="tgrall.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/talks">Talks</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/11/28/oc4j-sending-system-level-message-in-the-console-window/">OC4J: Sending System Level Message in the Console Window</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-11-28T20:46:33+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>8:46 pm</span></time>
        
           | <a href="/blog/2006/11/28/oc4j-sending-system-level-message-in-the-console-window/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/11/28/oc4j-sending-system-level-message-in-the-console-window/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>OracleAS 10gR3, so OC4J standalone, is using the standard <a href="http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/overview.html">Java logging framework</a>. Some of the
benefits are easy configuration, and extensibility. The configuration of the level of logging of the different loggers has been exposes in
the Oracle Application Server Console. To see the logger configuration, click on the Administration Tab and then Logger Configuration, you can then configure the different loggers.</p>

<p><img src="http://static.flickr.com/106/304730770_8db9728d3a_o.png"></p>

<p>By default the logger will write all the information in the default log.xml file, and for application lever logger it will go in the application.log. You may want to send the information in the console during development to debug/analyze your application. This is done using the configuration of the Handler. This information is currently not available in the Application Server Console, so I am documenting in the next steps how
to send the information in the console (terminal window).</p>

<p>The configuration of the OracleAS Logging is saved in the <code>$ORACLE_HOME/j2ee/home/config/j2ee-logging.xml</code> file. In this file you  can see that Oracle has defined
various handlers where information can be sent:</p>

<ul>
<li><code>console-handler</code> : Log the information in the console (the one we want to use in this sample)</li>
<li><code>oc4j-handler</code> : the default handler for most of the loggers, saving the information in the $ORACLE_HOME/j2ee/home/log/oc4j/log.xml using the Oracle Logger formatting</li>
<li><code>oracle-webservices-management-auditing-handler</code> : the handler used by the Web Services Auditing feature in the $ORACLE_HOME/j2ee/home/log/wsmgmt/auditing/log.xml</li>
<li><code>oracle-webservices-management-logging-handler</code> : the handler used by the Web Service Logging feature in the $ORACLE_HOME/j2ee/home/log/wsmgmt/logging/log.xml</li>
</ul>


<p>As you may know, OracleAS Web Service provides out of the box support for Auditing of the SOAP messages. You just need to go in the administration page of the Web Service and enable the auditing. By default the messages are logged in the auditing log pointed above. But during development it is really interesting to see the SOAP Messages in the console without having to configure a Proxy to capture the request/response. The easiest way to do that is to edit the <code>j2ee-logging.xml</code> file and associate the <code>console-handler</code> to the auditing logger using the following configuration:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;oracle.webservices.management.auditing&quot;</span> <span class="na">level=</span><span class="s">&quot;NOTIFICATION:1&quot;</span> <span class="na">useParentHandlers=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;handler</span> <span class="na">name=</span><span class="s">&quot;oracle-webservices-management-auditing-handler&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;handler</span> <span class="na">name=</span><span class="s">&quot;console-handler&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/logger&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>by doing this you will see the SOAP Message in the OC4J console that is running in your system.</p>

<p><img src="http://static.flickr.com/103/308538842_ed574a1c08_o.png"></p>

<p>You can also use this configuration with any loggers available in OC4J.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/11/20/download-the-the-oracle-technology-network-otn-greatest-hits/">Download the the Oracle Technology Network (OTN) &#8216;Greatest Hits&#8217;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-11-20T20:45:44+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>8:45 pm</span></time>
        
           | <a href="/blog/2006/11/20/download-the-the-oracle-technology-network-otn-greatest-hits/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/11/20/download-the-the-oracle-technology-network-otn-greatest-hits/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Oracle Technology Network (OTN) &ldquo;Greatest Hits&rdquo; is a compilation of the most popular technical articles, software downloads, podcasts, sample code, and documentation, we&rsquo;ve published in a given 12-month period. The compilation provides you with convenient access to the &ldquo;best&rdquo; of OTN as well as an insight into the interests of the Oracle developer and DBA communities.</p>

<ul>
<li><a href="http://www.oracle.com/technology/community/greatest-hits.html">Oracle Technology Network (OTN) &ldquo;Greatest Hits&rdquo; page</a>.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/11/13/ibm-article-jax-rpc-vs-jax-ws/">IBM Article: JAX-RPC vs JAX-WS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-11-13T16:44:01+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>4:44 pm</span></time>
        
           | <a href="/blog/2006/11/13/ibm-article-jax-rpc-vs-jax-ws/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/11/13/ibm-article-jax-rpc-vs-jax-ws/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was discussing with a customer not familiar with the JAX-WS standard. I was writing him a mail explaining the difference when I found this nice article on the IBM DeveloperWorks library:</p>

<ul>
<li><a href="http://www-128.ibm.com/developerworks/webservices/library/ws-tip-jaxwsrpc.html%20target=">Web services hints and tips: JAX-RPC vs JAX-WS</a></li>
</ul>


<p>It is an opportunity for me to remind OracleAS users that the 10.1.3.1 stack in addition to the JAX-RPC support also provides support for:</p>

<ul>
<li>Attachments with MTOM, Soap with Attachment and DIME</li>
<li>Annotations based development (JSR-181) that is part of JAX-WS</li>
<li>WS-Security and WS-Reliability</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/10/13/using-https-with-web-services/">Using HTTPS With Web Services</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-10-13T22:43:19+02:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>10:43 pm</span></time>
        
           | <a href="/blog/2006/10/13/using-https-with-web-services/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/10/13/using-https-with-web-services/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Prerequisites:</em></p>

<p>In this article you have</p>

<ul>
<li>already a Web Service deployed in OC4J that is running on the default HTTP port. The WSDL and Endpoint are available. In my sample
the non secure Web Service endpoint is: <code>http://127.0.0.1:8888/math-service/MathServiceSoapHttpPort</code></li>
</ul>


<h4>Add HTTPS to OC4J</h4>

<h5>Creating of the Keystore</h5>

<p>The first thing to do to secure OC4J would be to create a new keystore
that will contain the different certificates. The easiest way to do
that for a Java developer is to use <a href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html">SUN&rsquo;s keytool</a>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>keytool -genkey -alias oracle-server -dname "CN=Tug Grall, OU=Blog O=Grall And Co L=Redwood Shores, S=CA, C=US" -keyalg RSA -keypass welcome -storepass welcome -keystore server.keystore</span></code></pre></td></tr></table></div></figure>


<p>You can copy the <code>server.keystore</code> into the <code>$ORACLE_HOME/j2ee/home/config</code> to simplify the next steps.</p>

<h4>Configuring OC4J</h4>

<p>OC4J stand alone is using the notion of Web-Site to expose HTTP resources (Web Applications). The default-web-site is define is he
<code>$ORACLE_HOME/j2ee/home/config/default-web-site.xml</code>. To secure an OC4J you can follow the steps describe in the <a href="http://download.oracle.com/docs/cd/B25221_04/web.1013/b14429/configssl.htm">OC4J Security guide</a> that I have summarized in the following section.</p>

<p>What we want to achieve for the purpose of the demonstration is to have OC4J using HTTP and HTTPS, on port 8888 and 4443 for example.</p>

<ol>
<li>Copy <code>default-web-site.xml</code> to <code>secure-web-site.xml</code></li>
<li>Edit the secure-web-site.xml:

<ul>
<li>Change the <code>web-site</code> tag by changing the port to <code>4443</code> and adding the element <code>secure="true"</code></li>
<li>Add the <code>ssl-config</code> element and point this to the new created keystore.</li>
</ul>
</li>
</ol>


<p>The file looks like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;web-site</span>   <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
</span><span class='line'>  <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">&quot;http://xmlns.oracle.com/oracleas/schema/web-site-10_0.xsd&quot;</span>
</span><span class='line'>  <span class="na">port=</span><span class="s">&quot;4443&quot;</span>
</span><span class='line'>  <span class="na">secure=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>  <span class="na">display-name=</span><span class="s">&quot;OC4J 10g (10.1.3) Default Web Site&quot;</span>
</span><span class='line'>  <span class="na">schema-major-version=</span><span class="s">&quot;10&quot;</span>
</span><span class='line'>  <span class="na">schema-minor-version=</span><span class="s">&quot;0&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'>  ...
</span><span class='line'>  <span class="nt">&lt;ssl-config</span> <span class="na">keystore=</span><span class="s">&quot;server.keystore&quot;</span> <span class="na">keystore-password=</span><span class="s">&quot;welcome&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  ...
</span><span class='line'><span class="nt">&lt;/web-site&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Import the new Web site in your OC4J instance by editing the <code>$ORACLE_HOME/j2ee/home/server.xml</code>
file. You need to add or replace the web-site tag. In my case I want to
add the secure web site to my instance so the configuration looks like:</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>...
</span><span class='line'><span class="nt">&lt;web-site</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span> <span class="na">path=</span><span class="s">&quot;./default-web-site.xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;web-site</span> <span class="na">path=</span><span class="s">&quot;./secure-web-site.xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>Since we have copied the file from the default-web-site, all applications are available using HTTP and HTTPS</p>

<h4>Start OC4J and test the HTTPS port</h4>

<p>Start OC4J using the standard Java command or shell script, I am adding the Java Network debug flag that would help you to see what is
happening at the SSL level.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>java -Djavax.net.debug=ssl -jar oc4j.jar
</span></code></pre></td></tr></table></div></figure>


<p>You should be able to access the service WSDL using the HTTPS port for example in my case:</p>

<ul>
<li><code>https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort?WSDL</code></li>
</ul>


<h3>Consuming the Service using HTTPS</h3>

<h4>Generate and configure a client Keystore</h4>

<p>Event if this is possible to use the same keystore for the server and the client, I will guide you in the steps to create a client
certificate and import the certificate from the existing -server- one.</p>

<p>Here the command <em>to create</em> a new keystore:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>keytool -genkey -alias oracle-client -dname &quot;CN=John Doe, OU=Blog O=MyDummyClient, S=CA, C=US&quot; -keyalg RSA -keypass welcomeClient -storepass welcomeClient -keystore client.keystore
</span></code></pre></td></tr></table></div></figure>


<p>The next step is <em>to export</em> the certificate from the server keystore to be able to import it in the client:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>keytool -keystore server.keystore -export -alias oracle-server -file server.cer
</span></code></pre></td></tr></table></div></figure>


<p>You can now <em>import the cerificate</em> in the client keystore:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>keytool -keystore client.keystore -import -file server.cer
</span></code></pre></td></tr></table></div></figure>


<h3>Generate the proxy</h3>

<p>You have now the client certificate so you can use the Oracle Web
Service Assembler to generate the proxy. The only specific thing you
have to do is to specify which key store to use when running the tool.
The command to use when generating the proxy is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>java -Djavax.net.ssl.trustStore=/Users/tgrall/ssl/client.keystore
</span><span class='line'>    -Djavax.net.ssl.keyStore=/Users/tgrall/ssl/client.keystore
</span><span class='line'>    -Djavax.net.ssl.trustStorePassword=welcomeClient
</span><span class='line'>    -Djavax.net.ssl.keyStorePassword=welcomeClient
</span><span class='line'>    -jar $ORACLE_HOME/webservices/lib/wsa.jar
</span><span class='line'>    -genProxy
</span><span class='line'>    -wsdl https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort?WSDL
</span></code></pre></td></tr></table></div></figure>


<h3>Calling the Service using secure endpoint</h3>

<p>Configure the Java Environment to use the client store is made using the following System properties:</p>

<ul>
<li>javax.net.ssl.trustStore</li>
<li>javax.net.ssl.keyStore</li>
<li>javax.net.ssl.trustStorePassword</li>
<li>javax.net.ssl.keyStorePassword</li>
</ul>


<p>This could be done using different approach, property file, -D command
line parameter or programmatically. To simply the example I am using
the programmatic approach, the following code is part of the main
method of the Client class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">...</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;javax.net.ssl.trustStore&quot;</span><span class="o">,</span> <span class="s">&quot;/Users/tgrall/ssl/client.keystore&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;javax.net.ssl.keyStore&quot;</span><span class="o">,</span> <span class="s">&quot;/Users/tgrall/ssl/client.keystore&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;javax.net.ssl.trustStorePassword&quot;</span><span class="o">,</span> <span class="s">&quot;welcomeClient&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;javax.net.ssl.keyStorePassword&quot;</span><span class="o">,</span> <span class="s">&quot;welcomeClient&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">...</span>
</span><span class='line'><span class="c1">// Adding Debug information</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;javax.net.debug&quot;</span><span class="o">,</span> <span class="s">&quot;ssl&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>It is possible to change the Endpoint dynamically in the Proxy using the <code>setEndpoint</code> method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">...</span>
</span><span class='line'><span class="n">democlient</span><span class="o">.</span><span class="na">proxy</span><span class="o">.</span><span class="na">MathServiceSoapHttpPortClient</span> <span class="n">myPort</span> <span class="o">=</span> <span class="k">new</span> <span class="n">democlient</span><span class="o">.</span><span class="na">proxy</span><span class="o">.</span><span class="na">MathServiceSoapHttpPortClient</span><span class="o">();</span>
</span><span class='line'><span class="o">...</span>
</span><span class='line'><span class="n">String</span> <span class="n">ep</span> <span class="o">=</span> <span class="s">&quot;https://127.0.0.1:4443/math-service/MathServiceSoapHttpPort&quot;</span><span class="o">;</span>
</span><span class='line'><span class="n">myPort</span><span class="o">.</span><span class="na">setEndpoint</span><span class="o">(</span><span class="n">ep</span><span class="o">);</span>
</span><span class='line'><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Result of the operation is &quot;</span><span class="o">+</span> <span class="n">myPort</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">));</span>
</span><span class='line'><span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>You should now be able to run the client and call the service using HTTPS. This would look like:</p>

<p><img src="http://static.flickr.com/86/268580831_c24ec07d89_o.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/10/13/jdeveloper-what-are-my-system-properties/">JDeveloper: What Are My System Properties?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-10-13T21:43:51+02:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>9:43 pm</span></time>
        
           | <a href="/blog/2006/10/13/jdeveloper-what-are-my-system-properties/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/10/13/jdeveloper-what-are-my-system-properties/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been using JDeveloper
for many years, since the first release ;-). But I&rsquo;ve never payed
attention to a simple and very useful feature. When you click the Help
&gt; About menu you can access all the System properties of the
Java VM used by Jdeveloper  by clicking on the Properties tab</p>

<p><img src="http://static.flickr.com/109/268402753_19bd74c01b_o.png" title="JDeveloper System Property Viewer" ></p>

<p>Thanks to Gerard for the tip&hellip;.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/10/12/come-to-oracle-open-world-and-watch-mr-spring-and-mr-apache-speak/">Come to Oracle Open World and Watch Mr Spring and Mr Apache Speak</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-10-12T21:41:48+02:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>9:41 pm</span></time>
        
           | <a href="/blog/2006/10/12/come-to-oracle-open-world-and-watch-mr-spring-and-mr-apache-speak/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/10/12/come-to-oracle-open-world-and-watch-mr-spring-and-mr-apache-speak/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Oracle Open World is getting very close&hellip; And I am very excited to go to lot of sessions, two of them looks very interesting in the Oracle Develop track:</p>

<ul>
<li>Rod Johnson - Spring Update: What&rsquo;s New and Cool in Spring 2.0 (Monday 10/23/2006, 12:45 PM - 1:45 PM in the Hilton Hotel Grand Ballroom A)</li>
<li>Brian Behlendorf - Bringing Open Source Software Development Practices and Principles Into Your Company (Tuesday 10/24/2006, 1:15 PM - 2:15 PM in the Hilton Hotel Grand Ballroom A)</li>
</ul>


<p>This is quite exciting to have Open Source gurus coming to present to the Oracle conference, and explain how to use the new Spring in their projects or leverage Open Source practices to improve development in house&hellip; Take a look to the full program of Oracle Develop.</p>

<p>Start to use the Oracle OpenWorld Schedule Builder to organize your week in SF, if you have not registered yet for OOW click here.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/09/21/accessing-user-principal-in-a-web-service/">Accessing User Principal in a Web Service</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-09-21T06:39:33+02:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2006</span></span> <span class='time'>6:39 am</span></time>
        
           | <a href="/blog/2006/09/21/accessing-user-principal-in-a-web-service/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/09/21/accessing-user-principal-in-a-web-service/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>WS-Security provides a standard way to secure Web Services. Since based on SOAP it is agnostic of the stack you are using. When using JAX-RPC implementation, you are running in a J2EE container. In this post I am giving a tip to access the Principal object.</p>

<p>I have a service service, and I need to access some user information in its implementation class ( <code>org.tug.ws.sample.SimpleServiceImpl</code> ). This service is secure with WS-Security, with for example simple authentication, the following screenshot, is the configuration of inbound security in OracleAS 10gR3:</p>

<p><img src="http://static.flickr.com/92/248919057_ce2ba6a5f7_o.png" title="Web Services Management" ></p>

<p>So the service is secured, here the&nbsp;code that you have to add in your service implementation (or handlers) to access the Principal object.</p>

<ol>
<li>Implement <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/xml/rpc/server/ServiceLifecycle.html"><code>javax.xml.rpc.server.ServiceLifecycle</code></a></li>
<li>Implement the init(Object context) method to access
the <a href="http://java.sun.com/j2ee/1.4/docs/api/javax/xml/rpc/server/ServletEndpointContext.html"><code>ServletEndpointContext</code></a>,
that you can for example put as a local member of your implementation
class.</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="n">Object</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">_servleContext</span> <span class="o">=</span> <span class="o">(</span><span class="n">ServletEndpointContext</span><span class="o">)</span><span class="n">context</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Then you can access the principal object using the <code>getUserPrincipal()</code> method:</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">...</span>
</span><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">_servleContext</span><span class="o">.</span><span class="na">getUserPrincipal</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">Principal</span> <span class="n">userPrincipal</span> <span class="o">=</span> <span class="n">_servleContext</span><span class="o">.</span><span class="na">getUserPrincipal</span><span class="o">();</span>
</span><span class='line'>  <span class="o">...</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can find more information about the Security in J2EE 1.4 Web Services in the <a href="http://java.sun.com/blueprints/guidelines/designing_webservices/html/security.html#1045527">Designing Web Services with the J2EE 1.4 Platform</a> tutorial.</p>

<hr />

<p><em>Update on Wednesday october 4th:</em> Frank Nimphius, has use this entry to create a more detail article about <a href="http://www.orablogs.com/fnimphius/archives/001815.html">End to End Security with Web Services Security</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/09/16/choose-a-scripting-language-groovy-or-jruby/">Choose a Scripting Language? Groovy or JRuby?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-09-16T21:38:17+02:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>9:38 pm</span></time>
        
           | <a href="/blog/2006/09/16/choose-a-scripting-language-groovy-or-jruby/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/09/16/choose-a-scripting-language-groovy-or-jruby/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week I discussed dynamic languages with some consultants. This discussion was done in the context of integration of scripting technologies into Java EE environment. So the integration to the VM is important, I also think that the learning curve is a thing to consider.</p>

<p>It is true that, like any developer Iike to learn things everyday, this is why I have done some development with PHP, with Ruby On Rails, and obviously with Groovy, Javascript and many other dynamic languages.</p>

<p>The discussion moved quickly to an argument about which language is the best&hellip; Hard to say, but I would expect that to be more productive in enterprise it is better to use a &ldquo;Java Like&rdquo; syntax that allows you to leverage the power of scripts. Based on this comment it is for me a no brainer to say that Groovy is more interesting to a core Java developer than JRuby (or other Jython, Jacl, &hellip;). I do not even want to go in the details about VM integration, performances and so on&hellip;</p>

<p>So in this context, A. Sundararajan has posted <a href="http://blogs.sun.com/sundararajan/entry/java_groovy_and_j_ruby">a very interesting comparison of Java, Groovy and JRuby syntaxes</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/05/11/more-groovy-at-javaone/">More Groovy at Javaone !</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-05-11T21:37:50+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2006</span></span> <span class='time'>9:37 pm</span></time>
        
           | <a href="/blog/2006/05/11/more-groovy-at-javaone/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/05/11/more-groovy-at-javaone/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://groovy.codehaus.org/images/groovy-logo.png">
If like me you like scripting technologies and in particular Groovy and
Grails, JavaOne 2006 will be a very good moment to learn more about it.</p>

<p>Beside the official sessions listed below, I would like to inform you
of various events interesting for the Groovy community:</p>

<ul>
<li>Informal <strong>&ldquo;Groovy Community Meeting&amp;rdquo&rdquo;</strong>, <strong>Thursday night 5pm</strong> around the Oracle Demobooth where Guillaume, Graeme and Dierk will give you an
opportunity to learn more about these projects</li>
<li>Groovy presentations at the Oracle Booth in the pavilion</li>
</ul>


<p>The official sessions about Groovy and Grails are</p>

<table align="center">
<tbody>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
BOF-0554 </td>
<td align="left" width="45%">
Dynamic
Scripting Languages BOF </td>
<td align="center" width="15%">
&nbsp;Tuesday

05/16/2006

10:30 PM - 11:20 PM </td>
<td align="center" width="15%"> Moscone Center

Hall E 133 </td>
</tr>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
BOF-2521 </td>
<td align="left" width="45%">
Rapid
Web Application Development With Grails </td>
<td align="center" width="15%">
&nbsp;Thursday

05/18/2006

08:30 PM - 09:20 PM </td>
<td align="center" width="15%"> Moscone Center

Esplanade 307-310 </td>
</tr>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
TS-1246 </td>
<td align="left" width="45%">
Simplify
Enterprise Development With Scripting </td>
<td align="center" width="15%">
&nbsp;Thursday

05/18/2006

11:00 AM - 12:00 PM </td>
<td align="center" width="15%"> Moscone Center

Hall E 134 </td>
</tr>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
TS-3273 </td>
<td align="left" width="45%">
Groovy
= Java&trade; Technology+ Ruby + Python for the JVM&trade;
</td>
<td align="center" width="15%">
&nbsp;Wednesday

05/17/2006

02:45 PM - 03:45 PM </td>
<td align="center" width="15%"> Moscone Center

Gateway 104 </td>
</tr>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
TS-3714 </td>
<td align="left" width="45%">
Flash-Gridding
with Java&trade; Technology: Using Project Glassfish<small><sup>SM</sup></small>,
Jini&trade;/JavaSpaces&trade;, and Groovy as an Environment for
an Open Source, Self-Assembling Supercomputer </td>
<td align="center" width="15%">
&nbsp;Thursday

05/18/2006

02:45 PM - 03:45 PM </td>
<td align="center" width="15%"> Moscone Center

Gateway 104 </td>
</tr>
<tr align="center">
<td align="center" nowrap="nowrap" width="15%">
TS-5386 </td>
<td align="left" width="45%">
Groovy
Goes RFID with Smart Sensors for Real-World Control </td>
<td align="center" width="15%">
&nbsp;Tuesday

05/16/2006

05:45 PM - 06:45 PM </td>
<td align="center" width="15%"> Moscone Center

Gateway 104 </td>
</tr>
</tbody>
</table>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2006/05/03/grails-on-oracle-oracleas-and-oraclexe/">Grails on Oracle (OracleAS and OracleXE)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2006-05-03T21:31:41+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2006</span></span> <span class='time'>9:31 pm</span></time>
        
           | <a href="/blog/2006/05/03/grails-on-oracle-oracleas-and-oraclexe/#disqus_thread"
             data-disqus-identifier="http://tgrall.github.io/blog/2006/05/03/grails-on-oracle-oracleas-and-oraclexe/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>OTN (Oracle Technology Network)
Readers have noticed, that Oracle has
published an article from <a href="http://www.monson-haefel.com/">Richard Monson-Haefel</a> about <a href="http://www.oracle.com/technology/pub/articles/haefel-oracle-ruby.html">Ruby On Rails on Oracle</a>. This
article introduces the Ruby On Rails framework and explains how to use
it to access an Oracle database. (<a href="http://www.oracle.com/technology/products/database/xe/index.html">Oracle 10g Express Edition</a> to be exact)</p>

<p>If you are not familiar at all with Ruby On Rails, it is important to
notice that it has nothing to do with Java, J2EE. It is a <a href="http://www.ruby-lang.org/">Ruby</a>
based framework. &nbsp;So yes Ruby On Rails is really interesting,
powerful and so on&hellip; but for me as a Java developer I would like to do
the same using Java (or equivalent) leveraging the investment that I
have done in J2EE; also important I want to be able to deploy and
manage applications that are developed this way using my tools such as
Oracle Enterprise Manager Application Server Control.</p>

<p>The paradigm &ldquo;coding by convention&rdquo; that is the driver of Ruby on Rails
has been leveraged to developed a new framework: GRAILS. Grails uses
Groovy as the underlying language, so it runs on a JVM and can leverage
any existing Java API.</p>

<p>If you are a Java developer you will find very interesting to use this
framework to accelerate the development of Web applications. If you are
not yet a Java developer but need to develop Web application faster,
and deploy the to your J2EE application server, Grails is also a very
good tools.</p>

<p>Since I have started with Richard&rsquo;s article I will use the same
application/database schema to develop my first GRAILS application, and
also use the same structure in my article&hellip;(<em>is it what we call lazy loading?</em>)</p>

<h3>What is Groovy? What is Grails?</h3>

<p>Groovy is a dynamic language that leverage features from other
languages such as Ruby, Jython, and Smalltalk. Groovy is running at the
top of a Java VM and makes available any existing Java objects (so all
  the API) to Groovy. Groovy is currently under standardization with the <a href="http://www.jcp.org/en/jsr/detail?id=241">JSR-24</a><a href="http://www.jcp.org/en/jsr/detail?id=241">1</a>.
  &nbsp;You can learn more about Groovy on the <a href="http://groovy.codehaus.org/">Groovy site</a> and is <a href="http://glaforge.free.fr/weblog/?catid=2">project leader&rsquo;s (Guillaume Laforge) blog</a>.</p>

<p>GRAILS is to Groovy what Ruby On Rails is to Ruby. Originally named &ldquo;<em>Groovy On Rails</em>&rdquo;,
  this name has been dropped in favor of Grails to avoid
  confusion/competition. Like Ruby on Rails, Grails is designed to
  create <a href="http://en.wikipedia.org/wiki/CRUD_%28acronym%29">CRUD</a>
  (<em>Create Read Update Delete</em>) Web applications. &nbsp;You can learn more
  about Grail on the <a href="http://grails.codehaus.org/">Grails site</a> and is <a href="http://graemerocher.blogspot.com/">project leader&rsquo;s (Graeme Rocher) blog</a>.</p>

<p>Let&rsquo;s now dive in the sample application, for this, as stated earlier I
  am using the sample application described in the OTN articles.</p>

<h3>Example: The product Catalog</h3>

<h4>Step 1: Set up the Oracle database</h4>

<p>If you have not set up the schema and table from the article you just
  need to create the following objects:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CREATE TABLE comics (
</span><span class='line'>    id NUMBER(10) NOT NULL,
</span><span class='line'>    title VARCHAR2(60),
</span><span class='line'>    issue NUMBER(4),
</span><span class='line'>    publisher VARCHAR2(60),
</span><span class='line'>    PRIMARY KEY (id)
</span><span class='line'>    );
</span><span class='line'>    CREATE SEQUENCE comics_seq;</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Based on the OTN article I have created this table in the <span class="code">ruby</span> schema.</p>

<h4>Step 2: Install Grails</h4>

<p>Grails installation is straight forward and explained in the <a href="http://grails.codehaus.org/Installation">Installation guide</a>, basically:</p>

<ol>
<li>Download the binaries (I used <a href="http://build.canoo.com/grails/artifacts//grails-bin-0.2-SNAPSHOT.zip">Grails 0.2</a>)</li>
<li>Setup the different environment variable (<span class="code">GRAILS_HOME, JAVA_HOME, PATH</span>), I used Java 5.</li>
</ol>


<p>You are done !</p>

<h4>Step 3: create the Web Application</h4>

<p>Now we have installed the product, the next step is to create the application itself.</p>

<p><strong>Create the application</strong></p>

<p>The <span class="code">create-app</span> command is
  creating the full project, with the template
  with placeholder for the different components of your application such
  as configuration, MVC, and library and much more. To do it enter the
  following command, in your command line interface:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; grails create-app
</span><span class='line'>....
</span><span class='line'>.....
</span><span class='line'>create-app:
</span><span class='line'>[input] Enter application name:
</span><span class='line'>comics_catalog
</span><span class='line'>.....</span></code></pre></td></tr></table></div></figure>


<p>As you will see, Grails uses Ant intensively, the <span class="code">create-app</span>
  command will ask you for an application name, enter for example <span class="code">comics_catalog</span>.</p>

<p>The created application contains now a list of directory allowing
  developer to start to build the application using Groovy, Grails and
  any Web components.</p>

<p><strong><em>Add the Business Logic and Model:Domain Classes</em></strong></p>

<p>One of the biggest differences between Grails and RoR, is the fact that
  the main components of your application development is not the Table
  like you have in RubyOnRails but the &ldquo;Domain Class&rdquo;. &nbsp;The
  domain class are the core of the business application, they contains
  the state and the behavior of your application.</p>

<p>So the next step is to create a Domain Class for the Comics, to do that
  you just need to go in the home directory of your project, eg cd <span class="code">comics_catalog</span> and run the <span class="code">create-domain-class</span>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; cd comics_catalog
</span><span class='line'>&gt; grails create-domain-class
</span><span class='line'>....
</span><span class='line'>create-domain-class:
</span><span class='line'>[input] Enter domain class name:
</span><span class='line'>comics
</span><span class='line'>....</span></code></pre></td></tr></table></div></figure>


<p>When the command ask you to enter the class name, enter <span class="code">comics</span>. Grails, will not use the
  same naming convention that RoR has, so you need to use the same name
  for the class and the table you want to map your object on. The
  persistence layer is made using GROM (Grails Object Relational Mapping)
  that leverage hibernate.</p>

<p>Note: In our case what we are doing is to leverage an existing database
  object and create the domain class at the top of it. Usually, Grails
  uses a different approach where everything is driven by the
  application, so you create the domain class first and then Grails will
  create the different database objects.</p>

<p>The Comics class does not have any information related to the mapping
  itself, so you have to create the different attributes in the domain
  class. This is where you you start to use Groovy, the domain class is
  located in the following location:</p>

<ul>
<li><code>./comics_catalog/grails-app/domain/Comics.groovy</code></li>
</ul>


<p>Note hat by default Grails create the class with 2 attributes: id and
  version, keep them in place, and add title, issue and
  publisher.&nbsp;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">Comics</span> <span class="o">{</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">Long</span> <span class="n">id</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">Long</span> <span class="n">version</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// new properties for the Comics class</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">title</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">Long</span> <span class="n">issue</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">publisher</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="s">&quot;${this.class.name} :  $id&quot;</span> <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>We are all set, we are ready to run the magic command that will create the different screens and flow.</p>

<p><strong>Create the different screens from the domain class</strong></p>

<p>You can now run the <code>generate-all</code> command to create all the different screens.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&gt;</span> <span class="n">grails</span> <span class="n">generate</span><span class="o">-</span><span class="n">all</span>
</span><span class='line'><span class="o">....</span>
</span><span class='line'><span class="n">input</span><span class="o">-</span><span class="n">domain</span><span class="o">-</span><span class="nl">class:</span>
</span><span class='line'><span class="o">[</span><span class="n">input</span><span class="o">]</span> <span class="n">Enter</span> <span class="n">domain</span> <span class="kd">class</span> <span class="nc">name</span><span class="o">:</span>
</span><span class='line'><span class="n">comics</span>
</span><span class='line'><span class="o">....</span>
</span></code></pre></td></tr></table></div></figure>


<p>This command creates the different Views and Controllers, you can take a look to the directories:</p>

<ul>
<li><code>./comics_catalog/grails-app/controllers</code></li>
<li><code>./comics_catalog/grails-app/views</code></li>
</ul>


<p><strong>Configure the database access</strong></p>

<p>What we have to do is now to configure the application to use the Oracle database and schema.</p>

<p>Grails uses a configuration file for data source:</p>

<ul>
<li><code>./comics_catalog/grails-app/conf/ApplicationDataSource.groovy</code></li>
</ul>


<p>Let&rsquo;s edit this file to connect to our Oracle database.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">ApplicationDataSource</span> <span class="o">{</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="kt">boolean</span> <span class="n">pooled</span> <span class="o">=</span> <span class="kc">true</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">dbCreate</span> <span class="o">=</span> <span class="s">&quot;update&quot;</span> <span class="c1">// one of &#39;create&#39;, &#39;create-drop&#39;,&#39;update&#39;</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;jdbc:oracle:thin:@localhost:1521:XE&quot;</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">driverClassName</span> <span class="o">=</span> <span class="s">&quot;oracle.jdbc.OracleDriver&quot;</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="s">&quot;ruby&quot;</span>
</span><span class='line'>  <span class="nd">@Property</span> <span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">&quot;ruby&quot;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nothing special concerning the properties such as URL, DriverClassName,
  username and password.</p>

<p>The one that is interesting is the <span class="code">dbCreate</span>,
  that allows you to configure the behavior on the schema to create or
  not objects.In our sample the table exists, so we want to reuse the
  object, but we want to be sure that we have all the mandatory objects,
  columns too, so I selected <span class="code">update</span>.</p>

<p>The next thing to do is to add the Oracle JDBC driver to the
  application, to make it available. To make it available you just need
  to copy the JDBC driver into the lib directory of your application. In
  my case I am using Oracle XE so I copy the file from the following
  location:</p>

<ul>
<li><code>ORACLE_XE_HOME/app/oracle/product/10.2.0/server/jdbc/lib/ojdbc14.jar</code>
to</li>
<li><code>./comics_catalog/lib/</code></li>
</ul>


<h4>Step 4: Run the application</h4>

<p>Grails provide a way to run the application in stand alone mode, the command is <span class="code">run-app</span>. This command starts an Web container (based on Jetty) with the application&nbsp;deployed.</p>

<p><code>grails run-app</code></p>

<p>Note: Jetty will start on port 8080, in order to start in on a different port like e.g. 9090 use:</p>

<p><code>grails -Dserver.port=9090 run-app</code></p>

<p>You can now access the application using the following URL:</p>

<p><code>http://localhost:8080/comics_catalog/comics/</code></p>

<p>Your browser should show the list of comics from the Comics table.</p>

<p><img src="http://static.flickr.com/45/127519247_646a991d3a_o.png"></p>

<p><em>List of Comics</em></p>

<p>You can create a new entry by clicking on the &ldquo;New Comics&rdquo; tab, and view/edit/delete existing record by clicking on the &ldquo;Show&rdquo; link.</p>

<p><img src="http://static.flickr.com/56/127519249_0e580ede98_o.png"></p>

<p><em>Edit/Create entry</em></p>

<p>As you see the creation of an application is really easy. The next step is to deploy the application in your application server.</p>

<h4>Step 5: Deploy the application</h4>

<p>Grails provides a command to package the application as a WAR ready to
  be deployed, so in the root directory of your project you can run the
  following command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">grails</span> <span class="n">war</span>
</span></code></pre></td></tr></table></div></figure>


<p>When you run this command you end with a WAR with the name of your
  application located in the root of your project, in our case: <span class="code">comics_catalog.war</span></p>

<p>If you take a look to this WAR you&rsquo;ll see that it is quite big ~10Mb,
  this is because all the libraries are included in the Lib directory of
  the web application. You can see the exact structure of the WAR in the
  ./tmp (<span class="code">./comics_catalog/tmp/war</span>) directory of the application.</p>

<p>You can deploy the application as it is to Oracle Application Server 10<span style="font-style: italic;">g</span>,
  but to avoid the issue with the class loader you should configure the
  Web application to load the local classes first. It can be done during
  deployment with the class loader configuration screen:</p>

<p><img src="http://static.flickr.com/52/127519251_8a522dac17_o.png"></p>

<p>You can also save this configuration in a deployment plan to facilitate later deployment.</p>

<p>When the deployment is done you can access the application using the OracleAS host and port, something like:</p>

<p><code>http://localhost:8888/comics_catalog/comics/list</code></p>

<p>You can now administer and monitor the application like any other J2EE application deployed in OracleAS 10g.</p>

<p><em>Better Deployment Options</em></p>

<ul>
<li>I personally do not like the idea of shipping all the Jar
files in the WAR file, so instead you can use the OracleAS Shared
Libraries to create a Grails library by uploading and configuring all
the Jars. And package the War without all these libraries.</li>
<li>Also you should be able to configure Hibernate/Spring to
use a standard define Data source and use the JNDI name to lookup the
connections.</li>
</ul>


<h3>Conclusion</h3>

<p>GRAILS like Ruby On Rails are really interesting frameworks allowing
  developers to create quickly Web application that access relational
  database and especially the Oracle Database.</p>

<p>Grails is quite new (release 0.2), but the documentation is really nice
  and complete. I will encourage all developers that are interested by
  such framework to use it and provide feedback to the development team.</p>

<p>I will try provide other post about deployment of Grails on OracleAS,
  but also related to other interesting features of this framework, for
  example Ajax support, Validations etc etc.</p>

<h3>Resources</h3>

<ul>
<li><a href="http://grails.codehaus.org/">Grails</a></li>
<li><a href="http://groovy.codehaus.org/">Groovy</a></li>
<li><a href="http://rubyonrails.org/">Ruby on Rails</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/16">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/14">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/05/16/simple-caching-service-with-redis/">Simple Caching Service With Redis</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/01/02/how-to-use-ssl-slash-tls-with-redis-enterprise/">How to Use SSL/TLS With Redis Enterprise</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/09/19/redis-rolling-upgrade-on-pivotal-cloud-foundry-pcf/">Redis Rolling Upgrade on Pivotal Cloud Foundry (PCF)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/09/05/multi-nodes-redis-cluster-with-docker/">Multi-Nodes Redis Cluster With Docker</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/09/02/getting-with-redis-streams-and-java/">Getting Started With Redis Streams &amp; Java</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/tgrall">@tgrall</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'tgrall',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- blog2 -->
<ins class="adsbygoogle"
style="display:inline-block;width:120px;height:240px"
data-ad-client="ca-pub-0681046388042833"
data-ad-slot="9144931072"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2020 - Tug Grall -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'true';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
